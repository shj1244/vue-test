(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bab18"],{"37fd":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-toolbar",[r("v-toolbar-title",[e._v(e._s(e.pageTitle)+" ")]),r("v-spacer"),r("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.save}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),e._v(" 저장 ")],1)],1),e.form?r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[e.config.bo_use_category?r("v-select",{attrs:{label:"카테고리",items:e.config.bo_category,rules:[e.rules.require({label:"카테고리"})]},model:{value:e.form.wr_category,callback:function(t){e.$set(e.form,"wr_category",t)},expression:"form.wr_category"}}):e._e(),e.member?e._e():[r("v-text-field",{attrs:{label:"이름",readonly:!!e.form.wr_id,rules:e.rules.name},model:{value:e.form.wr_name,callback:function(t){e.$set(e.form,"wr_name",t)},expression:"form.wr_name"}}),r("v-text-field",{attrs:{label:"이메일",rules:e.rules.email},model:{value:e.form.wr_email,callback:function(t){e.$set(e.form,"wr_email",t)},expression:"form.wr_email"}}),r("input-password",{attrs:{label:"비밀번호",rules:e.rules.password()},model:{value:e.form.wr_password,callback:function(t){e.$set(e.form,"wr_password",t)},expression:"form.wr_password"}}),r("input-password",{attrs:{label:"비밀번호 확인",rules:[e.rules.matchValue(e.form.wr_password)]},model:{value:e.confirmPw,callback:function(t){e.confirmPw=t},expression:"confirmPw"}})],r("v-text-field",{attrs:{label:"제목",counter:"120",rules:[e.rules.require({label:"제목"})]},model:{value:e.form.wr_title,callback:function(t){e.$set(e.form,"wr_title",t)},expression:"form.wr_title"}}),r("ez-tiptap",{attrs:{editable:!0},on:{uploadImage:e.uploadImage},model:{value:e.form.wr_content,callback:function(t){e.$set(e.form,"wr_content",t)},expression:"form.wr_content"}}),r("v-combobox",{attrs:{label:"검색태그",items:e.tags,multiple:"",chips:"","deletable-chips":"","hide-selected":""},model:{value:e.form.wrTags,callback:function(t){e.$set(e.form,"wrTags",t)},expression:"form.wrTags"}}),e._l(e.config.wr_fields,(function(t,a){return r("div",{key:a},[t.title?r("v-text-field",{attrs:{label:t.title,rules:t.required?[e.rules.require({label:t.title})]:[]},model:{value:e.form["wr_"+(a+1)],callback:function(t){e.$set(e.form,"wr_"+(a+1),t)},expression:"form[`wr_${i + 1}`]"}}):e._e()],1)})),e._l(e.config.bo_upload_cnt,(function(t){return r("div",{staticClass:"d-flex"},[r("v-file-input",{attrs:{label:e.fileTitle(t),"show-size":""},model:{value:e.uploadFiles[t-1],callback:function(r){e.$set(e.uploadFiles,t-1,r)},expression:"uploadFiles[i - 1]"}})],1)}))],2):e._e()],1)},n=[],i=r("1da1"),o=r("5530"),l=(r("96cf"),r("a9e3"),r("cb29"),r("99af"),r("b64b"),r("2f62")),s=r("248f"),c=r.n(s),u=r("bbf4"),m={components:{inputPassword:u["a"]},name:"BasicForm",title:function(){return this.pageTitle},props:{config:Object,access:Object,id:[String,Number]},data:function(){return{form:null,valid:!0,confirmPw:"",uploadFiles:Array(this.config.bo_upload_cnt).fill(null),tags:[],loading:!1,upImages:[],isWrite:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(l["e"])({member:function(e){return e.user.member}})),{},{table:function(){return this.config.bo_table},pageTitle:function(){return this.config.bo_subject+(this.id?" 게시물 수정":" 게시물 작성")},rules:function(){return c.a}}),mounted:function(){this.init()},destroyed:function(){!this.isWrite&&this.upImages.length&&this.$axios.put("/api/board/imgCancle/".concat(this.table),this.upImages)},methods:{init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.id||e.initForm();case 1:case"end":return t.stop()}}),t)})))()},initForm:function(){for(var e={wr_reply:0,wr_parent:0,mb_id:this.member?this.member.mb_id:0,wr_email:this.member?this.member.mb_email:"",wr_name:this.member?this.member.mb_name:"",wr_password:"",wr_category:this.$route.query.ca||this.config.bo_category[0],wr_title:"",wr_content:"",wrTags:[]},t=1;t<=10;t++)e["wr_".concat(t)]="";this.form=e},fileTitle:function(e){return"첨부파일 ".concat(e)},uploadImage:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,i,o,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.file,n=e.desc,i=e.callback,o=new FormData,o.append("upFile",a),o.append("bf_desc",n),r.next=6,t.$axios.post("/api/board/imageUpload/".concat(t.table),o);case 6:l=r.sent,t.upImages.push(l),i("/upload/".concat(t.table,"/").concat(l.bf_src));case 9:case"end":return r.stop()}}),r)})))()},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i,o,l,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.form.validate(),t.next=3,e.$nextTick();case 3:if(e.valid){t.next=5;break}return t.abrupt("return");case 5:for(e.loading=!0,r=new FormData,a=Object.keys(e.form),n=0,i=a;n<i.length;n++)o=i[n],"Object"===typeof e.form[o]?r.append(o,JSON.stringify(e.form[o])):r.append(o,e.form[o]);for(l=0,s=0;s<e.config.bo_upload_cnt;s++)null!=e.uploadFiles[s]&&(r.append("upFiles[".concat(l),e.uploadFiles[s]),l++);if(!e.id){t.next=17;break}return t.next=14,e.update(r);case 14:c=t.sent,t.next=20;break;case 17:return t.next=19,e.insert(r);case 19:c=t.sent;case 20:c&&(e.isWrite=!0),e.loading=!1;case 22:case"end":return t.stop()}}),t)})))()},insert:function(e){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},update:function(e){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}},f=m,p=r("2877"),d=Object(p["a"])(f,a,n,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0bab18.6555e902.js.map